
rules_version = '2';

service cloud.firestore {
  match /databases/{database}/documents {

    // Allow public read access to cities and their routes
    match /cities/{cityId} {
      allow read: if true;
      allow write: if false; // Protect cities from being changed by clients

      match /routes/{routeId} {
        allow read: if true;
        allow write: if false; // Protect routes from being changed by clients
      }
    }

    // Allow buses to update their location (no changes here from before)
    match /buses/{busId} {
      allow read: if true;
      allow write: if true;
    }
  }
}
